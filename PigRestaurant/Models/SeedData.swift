import Foundation
import SwiftData

struct SeedData {
    static func seedIfNeeded(context: ModelContext) {
        let descriptor = FetchDescriptor<DishCategory>()
        guard (try? context.fetchCount(descriptor)) == 0 else { return }

        let categories: [(String, String, Int)] = [
            ("å®¶å¸¸çƒ­èœ", "ğŸ¥˜", 1),
            ("å‡‰èœå°é£Ÿ", "ğŸ¥—", 2),
            ("æ±¤ç¾¹ç²¥å“", "ğŸ²", 3),
            ("ä¸»é£Ÿé¢ç‚¹", "ğŸš", 4),
            ("æµ·é²œæ°´äº§", "ğŸ¦", 5),
            ("ç”œå“é¥®å“", "ğŸ°", 6),
        ]

        var categoryMap: [String: DishCategory] = [:]
        for (name, icon, order) in categories {
            let cat = DishCategory(name: name, icon: icon, sortOrder: order)
            context.insert(cat)
            categoryMap[name] = cat
        }

        let dishes: [(String, [(String, Double)])] = [
            ("å®¶å¸¸çƒ­èœ", [
                ("ç•ªèŒ„ç‚’è›‹", 12), ("çº¢çƒ§è‚‰", 35), ("å®«ä¿é¸¡ä¸", 28), ("é±¼é¦™è‚‰ä¸", 25),
                ("éº»å©†è±†è…", 18), ("å›é”…è‚‰", 30), ("é’æ¤’è‚‰ä¸", 22), ("å¹²ç…¸å››å­£è±†", 18),
                ("è’œè“‰è¥¿å…°èŠ±", 15), ("å¯ä¹é¸¡ç¿…", 28), ("ç³–é†‹æ’éª¨", 38), ("åœŸè±†çƒ§ç‰›è‚‰", 42),
                ("è¾£å­é¸¡", 32), ("èš‚èšä¸Šæ ‘", 18), ("åœ°ä¸‰é²œ", 20),
            ]),
            ("å‡‰èœå°é£Ÿ", [
                ("æ‹é»„ç“œ", 10), ("å‡‰æ‹Œæœ¨è€³", 12), ("çš®è›‹è±†è…", 15), ("å£æ°´é¸¡", 28),
                ("å‡‰æ‹Œè…ç«¹", 12), ("è’œæ³¥ç™½è‚‰", 25), ("è€é†‹èŠ±ç”Ÿ", 10),
            ]),
            ("æ±¤ç¾¹ç²¥å“", [
                ("ç•ªèŒ„è›‹èŠ±æ±¤", 12), ("ç´«èœè›‹æ±¤", 10), ("æ’éª¨è²è—•æ±¤", 35), ("é…¸è¾£æ±¤", 15),
                ("ç‰ç±³æ’éª¨æ±¤", 30), ("å†¬ç“œä¸¸å­æ±¤", 20), ("çš®è›‹ç˜¦è‚‰ç²¥", 15), ("å—ç“œå°ç±³ç²¥", 12),
            ]),
            ("ä¸»é£Ÿé¢ç‚¹", [
                ("è›‹ç‚’é¥­", 12), ("è‘±æ²¹æ‹Œé¢", 10), ("ç‚¸é…±é¢", 15), ("çŒªè‚‰æ°´é¥º", 20),
                ("éŸ­èœç›’å­", 15), ("è‘±èŠ±é¥¼", 10), ("çº¢ç³–é¦’å¤´", 8), ("è‚‰åŒ…å­", 12),
            ]),
            ("æµ·é²œæ°´äº§", [
                ("æ¸…è’¸é²ˆé±¼", 48), ("çº¢çƒ§å¸¦é±¼", 35), ("è’œè“‰ç²‰ä¸è’¸è™¾", 55),
                ("æ²¹ç„–å¤§è™¾", 58), ("é…¸èœé±¼", 42), ("æ°´ç…®é±¼", 45),
            ]),
            ("ç”œå“é¥®å“", [
                ("çº¢è±†æ²™", 10), ("é“¶è€³è²å­ç¾¹", 12), ("ç»¿è±†æ±¤", 8),
                ("é…¸æ¢…æ±¤", 8), ("æ¡‚èŠ±ç³•", 15), ("èŠ’æœè¥¿ç±³éœ²", 15),
            ]),
        ]

        for (catName, items) in dishes {
            guard let cat = categoryMap[catName] else { continue }
            for (name, price) in items {
                let dish = Dish(name: name, price: price, category: cat)
                context.insert(dish)
            }
        }

        try? context.save()
    }
}
